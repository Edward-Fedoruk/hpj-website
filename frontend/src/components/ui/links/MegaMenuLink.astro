---
import Icon from "../icons/Icon.astro";
import { servicesData } from "@data/mega_link";

const { url, name, width } = Astro.props;

interface Props {
  url: string;
  name: string;
  width?: "fit" | number;
}

const linkWidth = width !== undefined ? "w-[" + width + "px]" : "w-fit";
---

<div
  class={`hs-dropdown py-3 [--adaptive:none] [--strategy:static] md:px-3 md:py-4 md:[--strategy:absolute] md:[--trigger:hover] ${linkWidth}`}
>
  <a
    type="button"
    class="hidden min-h-[77px] w-full items-center text-center text-2xl font-normal text-current md:flex md:min-h-fit md:text-center md:text-lg dark:text-neutral-400 dark:hover:text-neutral-500"
    href={url}
    >
    {name}
    <Icon name="chevronDown" className="mt-[3px] ml-1 size-5" />
  </a>

  <a
    id={url === "/" ? "home" : url.replace("/", "")}
    href={url}
    data-astro-prefetch
    class={"text-nowrap text md:hidden md:text-center min-h-[77px] md:min-h-fit flex items-center rounded-lg text-2xl font-normal outline-hidden ring-zinc-500 focus-visible:ring-3 dark:text-neutral-400 dark:ring-zinc-200 dark:hover:text-neutral-500 dark:focus:outline-hidden md:py-3 md:text-lg text-current"}
    style={`min-width: ${width}px;`}
  >
    {name}
  </a>

  <div
    class="hs-dropdown-menu hs-dropdown-open:opacity-100 text-text-main top-full z-10 hidden w-fit min-w-60 rounded-2xl bg-white py-2 opacity-0 transition-[opacity,margin] duration-[0.1ms] before:absolute before:start-0 before:-top-5 before:h-5 before:w-full md:top-[70px] md:p-4 md:shadow-2xl md:duration-[150ms] dark:divide-neutral-700 dark:bg-neutral-800"
  >
    <div class="gap-4 md:grid">
      <div class="mx-1 flex flex-col md:mx-0">
        {
          servicesData &&
            servicesData.map((data) => (
              <a
                class="group flex gap-x-5 rounded-lg p-2 hover:bg-black/5 dark:text-neutral-200 dark:hover:bg-neutral-500/10"
                href={data.url}
              >
                <div class="grow">
                  <p class="font-medium text-neutral-800 dark:text-neutral-200">{data.title}</p>
                </div>
              </a>
            ))
        }
      </div>
    </div>
  </div>
</div>

<script>
  const goToUnitsPage = () => {
    window.location.href = "/units"
  }
</script>
