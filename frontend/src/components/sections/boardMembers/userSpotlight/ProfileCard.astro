---
import { buildStrapiResponsive } from '@/utils/strapiImg';
import type { Profile } from './UserSpotlightSection.astro';
import { Image } from 'astro:assets';

interface Props extends Profile {}

const { name, role, bio, avatar, socials } = Astro.props;

let builtImg = null;

if (avatar) {
  builtImg = buildStrapiResponsive(avatar);
}
---

<article
  class="w-full transform overflow-hidden rounded-2xl bg-white shadow-card md:max-w-[411px]"
>
  <div class="flex flex-col items-center p-4 text-center lg:p-12">
    <div class="mb-8 h-[103px] w-[103px] overflow-hidden rounded-full ring-2 ring-white dark:ring-gray-700">
      {
        builtImg && (
          <Image
            src={builtImg.src}
            width={builtImg.width}
            height={builtImg.height}
            srcset={builtImg.srcset}
            sizes="(max-width: 500px) 500px, 100vw"
            alt={builtImg.alt ?? `${name} â€” profile photo`}
            draggable={'false'}
            loading={'eager'}
            fetchpriority={'high'}
            class="h-full w-full object-cover"
          />
        )
      }
    </div>

    <h2 class="font-helvetica-bold text-text-main mt-4 text-2xl leading-[120%]">{name}</h2>
    <p class="text-text-secondary mt-1 text-lg">{role}</p>

    <p class="text-text-secondary mt-3 text-lg">{bio}</p>

    <div class="text-primary mt-8 flex justify-center gap-8">
      {
        socials.linkedin && (
          <a href={socials.linkedin} class="social-link" aria-label="LinkedIn" target="_blank">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M24 4C25.0609 4 26.0783 4.42143 26.8284 5.17157C27.5786 5.92172 28 6.93913 28 8V24C28 25.0609 27.5786 26.0783 26.8284 26.8284C26.0783 27.5786 25.0609 28 24 28H8C6.93913 28 5.92172 27.5786 5.17157 26.8284C4.42143 26.0783 4 25.0609 4 24V8C4 6.93913 4.42143 5.92172 5.17157 5.17157C5.92172 4.42143 6.93913 4 8 4H24ZM10.6667 13.3333C10.313 13.3333 9.97391 13.4738 9.72386 13.7239C9.47381 13.9739 9.33333 14.313 9.33333 14.6667V21.3333C9.33333 21.687 9.47381 22.0261 9.72386 22.2761C9.97391 22.5262 10.313 22.6667 10.6667 22.6667C11.0203 22.6667 11.3594 22.5262 11.6095 22.2761C11.8595 22.0261 12 21.687 12 21.3333V14.6667C12 14.313 11.8595 13.9739 11.6095 13.7239C11.3594 13.4738 11.0203 13.3333 10.6667 13.3333ZM14.6667 12C14.313 12 13.9739 12.1405 13.7239 12.3905C13.4738 12.6406 13.3333 12.9797 13.3333 13.3333V21.3333C13.3333 21.687 13.4738 22.0261 13.7239 22.2761C13.9739 22.5262 14.313 22.6667 14.6667 22.6667C15.0203 22.6667 15.3594 22.5262 15.6095 22.2761C15.8595 22.0261 16 21.687 16 21.3333V16.4533C16.4067 15.9947 17.0933 15.456 17.8573 15.1293C18.3013 14.94 18.9693 14.8627 19.4333 15.0093C19.5873 15.0484 19.7244 15.1363 19.824 15.26C19.8933 15.3533 20 15.5613 20 16V21.3333C20 21.687 20.1405 22.0261 20.3905 22.2761C20.6406 22.5262 20.9797 22.6667 21.3333 22.6667C21.687 22.6667 22.0261 22.5262 22.2761 22.2761C22.5262 22.0261 22.6667 21.687 22.6667 21.3333V16C22.6667 15.1067 22.44 14.312 21.968 13.6747C21.5337 13.0967 20.9258 12.673 20.2333 12.4653C19.0307 12.088 17.6987 12.2973 16.8093 12.6787C16.5246 12.8011 16.2473 12.94 15.9787 13.0947C15.9228 12.7875 15.7608 12.5096 15.5211 12.3096C15.2813 12.1095 14.9789 12 14.6667 12ZM10.6667 9.33333C10.313 9.33333 9.97391 9.47381 9.72386 9.72386C9.47381 9.97391 9.33333 10.313 9.33333 10.6667C9.33333 11.0203 9.47381 11.3594 9.72386 11.6095C9.97391 11.8595 10.313 12 10.6667 12C11.0203 12 11.3594 11.8595 11.6095 11.6095C11.8595 11.3594 12 11.0203 12 10.6667C12 10.313 11.8595 9.97391 11.6095 9.72386C11.3594 9.47381 11.0203 9.33333 10.6667 9.33333Z"
                fill="#524CF2"
              />
            </svg>
          </a>
        )
      }

      {
        socials.facebook && (
          <a href={socials.facebook} class="social-link" aria-label="Facebook" target="_blank">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M29.3334 16.0003C29.3334 8.64033 23.3601 2.66699 16.0001 2.66699C8.64008 2.66699 2.66675 8.64033 2.66675 16.0003C2.66675 22.4537 7.25341 27.827 13.3334 29.067V20.0003H10.6667V16.0003H13.3334V12.667C13.3334 10.0937 15.4267 8.00033 18.0001 8.00033H21.3334V12.0003H18.6667C17.9334 12.0003 17.3334 12.6003 17.3334 13.3337V16.0003H21.3334V20.0003H17.3334V29.267C24.0667 28.6003 29.3334 22.9203 29.3334 16.0003Z"
                fill="#524CF2"
              />
            </svg>
          </a>
        )
      }

      {
        socials.email && (
          <a href={'mailto:' + socials.email} class="social-link" aria-label="E-mail" target="_blank">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M27.3 5H5.7C4.215 5 3.0135 6.18125 3.0135 7.625L3 23.375C3 24.8188 4.215 26 5.7 26H27.3C28.785 26 30 24.8188 30 23.375V7.625C30 6.18125 28.785 5 27.3 5ZM27.3 10.25L16.5 16.8125L5.7 10.25V7.625L16.5 14.1875L27.3 7.625V10.25Z"
                fill="#524CF2"
              />
            </svg>
          </a>
        )
      }
    </div>
  </div>
</article>
