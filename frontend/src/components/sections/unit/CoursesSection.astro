---
import SecondaryCTA from "@/components/ui/buttons/SecondaryCTA.astro";
import type { StrapiImageType } from "@/types/common";
import { buildStrapiResponsive } from "@/utils/strapiImg";

const {
  title,
  subTitle,
  coursesList
} = Astro.props;

export interface CourseItem {
  title: string;
  date: string;
  courseId: string;
}

export interface CourseBlockItem {
  blockTitle: string;
  trainingCourses: CourseItem[];
}

export interface CoursesSectionProps {
  title: string;
  subTitle?: string;
  coursesList?: CourseBlockItem[];
}

interface Props extends CoursesSectionProps {}
---

<section
  class="header-text-dark mx-auto flex flex-col gap-6 bg-white px-4 py-[100px] pb-[142px] md:items-center md:gap-8 md:py-[120px] md:pb-[120px] lg:px-10"
>
  <div class="w-full">
    <div class="mx-auto w-full max-w-7xl bg-[#F8F8F8] p-4 md:p-12 shadow-card overflow-hidden rounded-xl">
      <div class="max-w-[840px] mx-auto">
        <h1
          class="text-text-main   block text-center text-[32px] leading-[110%] font-black text-balance whitespace-pre-line lg:text-[52px] dark:text-neutral-200"
          data-aos="fade-up"
          data-aos-delay="150"
          data-aos-once="true"
        >
          <Fragment set:html={title} />
        </h1>

        {
          subTitle && 
          <p  
            class="text-text-secondary  mx-auto mt-3 w-full max-w-[846px] text-center text-lg"
            data-aos="fade-up"
            data-aos-delay="250"
            data-aos-once="true"
          >
            {subTitle}
          </p>
        }

        {
          coursesList &&
          coursesList.map((couseBlock, index) => {
            return (
            <div
              data-aos="fade-up"
              data-aos-delay={300 + index * 200}
              data-aos-once="true"
              class="mt-12"
              data-aos-anchor-placement="top-bottom"
            >
              <p class="text-text-main font-bold text-[28px] mb-4">
                {couseBlock.blockTitle}  
              </p>

              {
                couseBlock.trainingCourses.length > 0 && (
                  <ul class="flex flex-col gap-4">
                    {
                      couseBlock.trainingCourses.map((courseItem, index) => {
                        return (
                          <li 
                            class="flex flex-row gap-4 justify-between bg-white px-8 py-4 items-center rounded-2xl hover:shadow-card ease-in-out duration-300 group"
                            data-aos="fade-up"
                            data-aos-delay={300 + index * 200}
                            data-aos-once="true"
                            data-aos-anchor-placement="top-bottom"
                          >
                            <div class="flex flex-col gap-4">
                              <p class="text-text-main font-bold">{courseItem.title}</p>
                              <p class="text-text-secondary">{new Date(courseItem.date).toLocaleDateString("en-US", {
                                      day:"numeric",
                                      year: "numeric",
                                      month: "long",
                                    })
                                  }
                              </p>
                            </div>

                            <SecondaryCTA title={"Contact To Book"} className={"text-primary h-[38px] group-hover:bg-primary group-hover:text-white hover:bg-primary! hover:text-white!"}  data-courseId={courseItem.courseId} />
                          </li>
                        )
                      })
                    }
                  </ul>
                )
              }
            </div>
            )
          })
        }
        <p 
          class="mt-12 text-text-secondary text-center"
          data-aos="fade-up"
          data-aos-delay="250"
          data-aos-once="true"
          data-aos-anchor-placement="top-bottom"
        >By contacting us you agree to our <a href="/terms-and-conditions" target="_blank"  class="underline underline-offset-3 cursor-pointer">Terms & Conditions</a> and <a href="/privacy-policy" target="_blank" class="underline underline-offset-3 cursor-pointer">Privacy Policy</a>.</p>
      
      </div>
    </div>
  </div>
</section>
